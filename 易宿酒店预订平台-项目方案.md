# 易宿酒店预订平台 - 项目方案设计

## 📋 项目概述

**项目背景**：前端训练营两周小组作业，3人团队
**目标**：开发一个包含移动端（用户端）和PC端（管理端）的酒店预订平台

---

## 🌟 项目亮点（汇报用）

### 一句话介绍
> 基于 Taro 跨端框架的酒店预订平台，一套代码同时发布 H5 和小程序，实现性能优化与用户体验的完美平衡。

### 核心亮点

| 亮点类别 | 具体内容 | 对应评分 |
|---------|----------|---------|
| **跨端技术** | 使用 Taro 实现 H5+微信小程序双端发布，一套代码多端运行 | 项目创新性 |
| **性能优化** | 虚拟滚动解决长列表渲染卡顿，骨架屏提升加载体验 | 技术复杂度 |
| **用户体验** | 自定义日历组件支持入住/离店联动选择，自动计算间夜 | 用户体验 |
| **LBS 定位** | 获取用户当前位置，支持"距我最近"排序 | 项目创新性 |
| **代码质量** | TypeScript 全覆盖，规范的 Git 提交，清晰的模块化设计 | 代码质量 |
| **技术规范** | RESTful API 设计，Express 后端，Ant Design/NutUI 组件库 | 技术复杂度 |

### 汇报话术参考

```
各位老师好，我们小组开发的易宿酒店预订平台有以下亮点：

1. 跨端能力：使用 Taro 框架，一套代码同时发布 H5 和小程序版本，
   展示了对跨端开发的理解。

2. 性能优化：针对酒店列表页的长列表场景，我们实现了虚拟滚动，
   只渲染可视区域的内容，配合骨架屏，大幅提升用户体验。

3. 创新组件：自主开发了入住/离店日历选择组件，支持日期联动校验、
   自动计算间夜，并标记已售罄日期。

4. LBS 定位：集成定位功能，支持"附近酒店"搜索和"距我最近"排序，
   贴近真实使用场景。

5. 代码质量：项目使用 TypeScript 保证类型安全，遵循 Conventional Commits
   规范，模块化设计清晰，代码复用率高。
```

---

## 🛠 技术选型（基于课程大纲）

### 前端技术栈

| 端 | 技术方案 | 理由 |
|---|---|---|
| **移动端（用户端）** | Taro + React + TypeScript | 跨端框架，一套代码发布H5+小程序，符合课程跨端开发要求 |
| **UI组件库** | Taro UI 或 NutUI | Taro生态组件库，适配多端 |
| **PC端（管理端）** | React + Vite + Ant Design + TypeScript | 中后台系统标准方案，组件丰富 |
| **状态管理** | React Context + hooks 或 Zustand | 轻量级，避免Redux复杂度 |
| **路由** | React Router v6 (PC) / Taro Router (移动) | 标准路由方案 |
| **HTTP客户端** | Axios | 简单易用 |
| **日期处理** | Day.js | 轻量级日期库 |

**Taro 多端发布目标**：
- H5 网页版（主要交付）
- 微信小程序（可选，技术展示）

### 后端技术栈

| 技术 | 说明 |
|---|---|
| **框架** | Express.js（课程教授Node.js） |
| **数据存储** | JSON 文件存储（开发模式，快速实现） |
| **API设计** | RESTful API |

### 开发工具

- **包管理器**：npm
- **代码规范**：ESLint + Prettier
- **版本控制**：Git + GitHub

---

## 👥 三人分工方案

### 方案对比

| 对比维度 | 方案A：按端划分 | 方案B：全栈协作 |
|---------|----------------|----------------|
| **协作模式** | 专人负责专端，职责清晰 | 共同开发所有模块 |
| **适合场景** | 成员技能有明确偏好 | 成员能力均衡 |
| **优点** | 职责清晰，减少代码冲突 | 学习全面，互相补位 |
| **缺点** | 后端依赖度高 | 需要更多沟通协调 |
| **推荐度** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |

---

### 方案 A：按端划分（推荐）

```
┌─────────────────────────────────────────────────────────────┐
│                        项目架构                              │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  ┌──────────────────┐  ┌──────────────────┐  ┌─────────────────┐│
│  │  成员 A (移动端)  │  │  成员 B (PC端)   │  │ 成员 C (后端+联调)││
│  │                  │  │                  │  │                 ││
│  │ • 酒店查询页     │  │ • 登录/注册页    │  │ • Express API   ││
│  │ • 酒店列表页     │  │ • 酒店信息录入   │  │ • 数据结构设计  ││
│  │ • 酒店详情页     │  │ • 审核/发布页面  │  │ • 前后端联调    ││
│  │ • Taro 开发      │  │ • Ant Design     │  │ • 公共组件库    ││
│  │ • 虚拟滚动       │  │                  │  │ • 最终集成      ││
│  │ • LBS定位        │  │                  │  │                 ││
│  └──────────────────┘  └──────────────────┘  └─────────────────┘│
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

#### 成员 A - 移动端负责人
**负责页面**：
- 酒店查询页（首页）- 5分
- 酒店列表页 - 15分
- 酒店详情页 - 15分

**创新功能负责**：
- 虚拟滚动列表
- LBS 定位搜索

**工作量**：35分（占总功能35%）

#### 成员 B - PC管理端负责人
**负责页面**：
- 登录/注册页 - 5分
- 酒店信息录入/编辑页 - 10分
- 审核/发布/下线列表页 - 10分

**工作量**：25分（占总功能25%）

#### 成员 C - 后端 + 公共模块 + 集成负责人
**负责模块**：
- Express 后端 API 开发
- 数据结构设计
- 公共组件库（自定义日历组件）
- 前后端联调协调
- 最终集成测试
- README 编写

**创新功能负责**：
- 自定义日历组件

**工作量**：支撑性工作 + 10%代码质量

---

### 方案 B：全栈协作（备选）

```
┌─────────────────────────────────────────────────────────────┐
│                      全栈协作模式                            │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│   所有成员共同参与所有模块开发，按功能点分工                  │
│                                                               │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │                     公共基础（全员参与）                 │ │
│  │  • 项目初始化、数据结构设计、API 接口定义               │ │
│  └─────────────────────────────────────────────────────────┘ │
│                                                               │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐  │
│  │  成员 A     │  │  成员 B     │  │    成员 C           │  │
│  │             │  │             │  │                     │  │
│  │ • 移动端 1.5 │  │ • 移动端 1.5 │  │ • 后端 API 开发    │  │
│  │ • PC端 1    │  │ • PC端 1    │  │ • 移动端 0.5       │  │
│  │ • 日历组件  │  │ • 虚拟滚动  │  │ • PC端 1            │  │
│  └─────────────┘  └─────────────┘  │ • LBS定位          │  │
│                                    │ • 集成测试         │  │
│                                    └─────────────────────┘  │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

#### 功能点划分

| 功能模块 | 负责人 | 工作内容 |
|---------|--------|---------|
| **项目初始化** | 全员 | 环境搭建、目录结构、Git仓库 |
| **后端 API** | 成员C | Express服务器、路由、数据存储 |
| **公共组件** | 成员A | 自定义日历组件、共享类型定义 |
| **移动端 - 查询页** | 成员A | 首页UI、搜索表单 |
| **移动端 - 列表页** | 成员B | 列表渲染、虚拟滚动 |
| **移动端 - 详情页** | 成员A | 详情展示、房型列表 |
| **PC端 - 登录注册** | 成员B | 表单验证、角色切换 |
| **PC端 - 酒店录入** | 成员C | 表单设计、图片上传 |
| **PC端 - 审核列表** | 成员C | 状态管理、操作反馈 |
| **LBS定位功能** | 成员C | 定位API、距离计算 |
| **集成测试** | 成员C | 端到端测试、Bug修复 |
| **文档编写** | 成员B | README、API文档 |

---

## 📁 项目目录结构（Taro 版本）

```
Trip/
├── mini-app/                  # 移动端（Taro 跨端项目）
│   ├── src/
│   │   ├── components/        # 公共组件
│   │   │   ├── HotelCard/     # 酒店卡片
│   │   │   ├── Calendar/      # 自定义日历组件（创新点）
│   │   │   ├── FilterBar/     # 筛选栏
│   │   │   └── VirtualList/   # 虚拟滚动列表（创新点）
│   │   ├── pages/             # 页面
│   │   │   ├── home/          # 首页/查询页
│   │   │   ├── list/          # 列表页
│   │   │   └── detail/        # 详情页
│   │   ├── services/          # API服务
│   │   ├── hooks/             # 自定义hooks
│   │   │   └── useLocation.ts # LBS定位hook（创新点）
│   │   ├── utils/             # 工具函数
│   │   ├── types/             # TypeScript类型
│   │   ├── app.config.ts      # Taro应用配置
│   │   └── app.tsx
│   ├── project.h5.json        # H5端配置
│   ├── project.weapp.json     # 微信小程序配置
│   ├── package.json
│   └── tsconfig.json
│
├── admin/                     # PC管理端（React + Vite）
│   ├── public/
│   ├── src/
│   │   ├── components/        # 公共组件
│   │   ├── pages/
│   │   │   ├── Login/         # 登录/注册
│   │   │   ├── HotelEdit/     # 酒店信息录入
│   │   │   └── AuditList/     # 审核列表
│   │   ├── services/
│   │   ├── hooks/
│   │   └── App.tsx
│   └── package.json
│
├── server/                    # Node.js后端
│   ├── src/
│   │   ├── routes/            # API路由
│   │   │   ├── hotels.ts      # 酒店相关API
│   │   │   └── auth.ts        # 认证API
│   │   ├── controllers/       # 控制器
│   │   ├── services/          # 业务逻辑
│   │   ├── data/              # JSON数据存储
│   │   │   ├── hotels.json
│   │   │   └── users.json
│   │   └── index.ts           # 入口文件
│   └── package.json
│
├── shared/                     # 共享代码
│   ├── types/                 # 共享TypeScript类型
│   └── constants/             # 共享常量
│
├── docs/                      # 文档
│   └── api.md                 # API文档
│
├── .gitignore
├── README.md
└── package.json               # 根目录（Monorepo）
```

---

## 🎯 项目创新点（技术优势展示）

### ✅ 已选定的创新功能

#### 1. 虚拟滚动 + 骨架屏（必选 - 技术复杂度得分）
**对应评分**：技术复杂度 - 长列表渲染优化（3分）

```
实现方案：
- 使用 @tarojs/components 的 VirtualList 或自定义实现
- 只渲染可视区域的酒店列表项
- 配合骨架屏提升加载体验
- 支持上拉加载更多（无限滚动）
```

**技术价值**：展示对性能优化的理解，解决长列表渲染卡顿问题

---

#### 2. 自定义日历组件（必选 - 用户体验亮点）
**对应评分**：用户体验 - 交互流畅性（5分）

```
实现方案：
- 自定义日历组件，支持 H5 + 小程序
- 入住/离店日期联动选择（选择离店日期时自动校验）
- 自动计算入住间夜
- 标记已售罄日期
- 价格日历视图（不同日期显示不同价格）
```

**技术价值**：展示组件开发能力和用户体验设计思维

---

#### 3. LBS 定位搜索（必选 - 创新功能）
**对应评分**：项目创新性 - 自发设计提升体验（5分）

```
实现方案：
- 使用 Taro.getLocation() 获取当前位置
- H5端使用浏览器 Geolocation API
- 小程序端使用 wx.getLocation()
- 自动搜索附近酒店
- "距我最近"排序选项
- 显示距离用户的公里数
```

**技术价值**：展示对多端 API 的适配能力，体现实际应用场景

---

### 📋 可选创新功能（时间允许时添加）

#### 4. 实时价格更新机制
**对应评分**：技术复杂度 - 数据结构设计（2分）

```
- 使用轮询机制模拟价格动态更新
- 模拟"节日优惠打8折"等场景
- 房型价格从低到高自动排序
- 价格变动动画效果
```

#### 5. 图片懒加载 + WebP 格式
```
- 使用 Intersection Observer 实现图片懒加载
- 优先加载首屏图片
- 支持 WebP 格式（节省流量）
```

#### 6. 地图集成
```
- 使用高德/百度地图API展示酒店位置
- 显示周边热门景点、交通、商场
- 距离计算和导航
```

#### 7. 离线缓存策略
```
- 使用 Taro.setStorage 缓存已浏览酒店
- 提升二次访问体验
```

#### 8. 分享功能
```
- 酒店详情页生成分享卡片
- 小程序端使用 button open-type="share"
- H5端复制链接功能
```

---

## 📅 两周开发计划（基于方案A）

### Week 1：基础搭建 + 核心功能

| 天数 | 成员A（移动端+Taro） | 成员B（PC端） | 成员C（后端+公共） |
|-----|---------------------|---------------|-------------------|
| Day 1 | Taro环境搭建、项目初始化 | React+Vite环境搭建 | Express框架搭建、数据结构设计 |
| Day 2 | 首页框架、导航配置 | 登录/注册页面框架 | 用户/酒店API开发 |
| Day 3 | 酒店查询页（搜索表单） | 登录/注册逻辑实现 | API联调、CORS配置 |
| Day 4 | 酒店列表页（基础列表） | 酒店信息录入页框架 | 公共类型定义 |
| Day 5 | 酒店列表页（筛选排序） | 酒店信息表单验证 | 自定义日历组件开发 |
| Day 6 | 酒店详情页（展示部分） | 审核/发布列表页 | 前后端联调 |
| Day 7 | 酒店详情页（房型列表） | 状态流转逻辑 | 集成测试 |

### Week 2：创新功能 + 优化完善

| 天数 | 成员A（移动端） | 成员B（PC端） | 成员C（后端+创新） |
|-----|----------------|---------------|-------------------|
| Day 8 | **虚拟滚动**实现 | UI美化、动画效果 | LBS定位API开发 |
| Day 9 | 虚拟滚动调优 | 表单交互优化 | 定位功能联调 |
| Day 10 | 列表页性能优化 | 响应式布局调整 | 小程序端适配（可选） |
| Day 11 | 图片懒加载 | 数据导出功能（可选） | 价格更新机制 |
| Day 12 | 移动端测试 | PC端测试 | 端到端测试 |
| Day 13 | Bug修复 | Bug修复 | README编写 |
| Day 14 | 演示准备 | 演示准备 | 最终检查 |

---

## 🎯 里程碑检查点

| 里程碑 | 时间 | 检查内容 | 负责人 |
|-------|------|---------|--------|
| M1 | Day 2 | 环境搭建完成，能运行Hello World | 全员 |
| M2 | Day 4 | 后端API可用，前端能调用接口 | 成员C |
| M3 | Day 7 | 所有基础页面完成，功能可演示 | 全员 |
| M4 | Day 10 | 创新功能实现完成 | 全员 |
| M5 | Day 13 | 测试通过，无严重Bug | 全员 |
| M6 | Day 14 | 文档完整，可交付演示 | 成员C |

---

## 📊 评分对应策略

### 功能完成度（60分）
| 页面 | 负责人 | 分值 | 重点关注 |
|-----|--------|------|---------|
| 酒店查询页 | A | 5 | 日历组件、定位功能 |
| 酒店列表页 | A | 15 | 虚拟滚动、筛选、无限加载 |
| 酒店详情页 | A | 15 | 图片轮播、房型排序、价格展示 |
| 登录/注册 | B | 5 | 角色区分、表单验证 |
| 信息录入 | B | 10 | 表单设计、数据校验 |
| 审核列表 | B | 10 | 状态流转、操作反馈 |

### 技术复杂度（10分）
- 数据结构设计 + 实时更新机制（2分）
- 流畅的用户体验 + 虚拟滚动（5分）
- 长列表渲染优化（3分）

### 用户体验（10分）
- 视觉设计、布局合理（6分）
- 兼容性保证（4分）

### 代码质量（10分）
- 项目结构清晰（4分）
- 编码规范、README（3分）
- 代码复用、组件抽取（3分）

### 项目创新性（10分）
- 新技术提升效率（5分）
- 自发设计提升体验（5分）

---

## 📦 Taro 项目初始化命令参考

```bash
# 使用 Taro CLI 创建项目
npx @tarojs/cli init mini-app

# 选择配置
# ✔ 请输入项目介绍：易宿酒店预订平台移动端
# ✔ 是否需要使用 TypeScript ：Yes
# ✔ 请选择框架：React
# ✔ 请选择 CSS 预处理器：Sass/Less
# ✔ 请选择编译工具：Webpack4/Vite3
# ✔ 请选择包管理器：npm
# ✔ 请选择模板源：默认
```

### Taro 开发命令

```bash
# H5 开发
npm run dev:h5

# 微信小程序开发
npm run dev:weapp

# 构建生产版本
npm run build:h5
npm run build:weapp
```

---

## 🔧 推荐的 Taro 生态组件库

| 组件库 | 特点 | 推荐指数 |
|-------|------|---------|
| **Taro UI** | Taro 官方组件库，稳定 | ⭐⭐⭐⭐ |
| **NutUI** | 京东出品，组件丰富，设计现代 | ⭐⭐⭐⭐⭐ |
| **Taroify** | Vant 风格，适合熟悉 Vant 的团队 | ⭐⭐⭐⭐ |

**推荐**：NutUI 3.x（组件丰富，文档完善，设计现代）

---

## 📝 Taro 多端开发注意事项

### 1. 条件编译
```typescript
// 根据不同平台使用不同API
if (process.env.TARO_ENV === 'h5') {
  // H5 特有代码
  window.navigator.geolocation.getCurrentPosition(...)
} else if (process.env.TARO_ENV === 'weapp') {
  // 小程序特有代码
  Taro.getLocation().then(...)
}
```

### 2. 样式适配
```scss
// 使用 Taro 的尺寸单位 rpx，自动适配不同屏幕
.container {
  width: 750rpx;  // 等于屏幕宽度
  height: 200rpx;
}
```

### 3. 性能优化
- 长列表使用 `VirtualList` 组件
- 图片使用 `lazyLoad` 属性
- 避免频繁的 `setState`

### 4. 小程序限制
- 包大小限制（主包2MB，总包20MB）
- 不支持部分 Web API
- 需要配置服务器域名白名单

---

## ✅ 待确认的决策

### 1. 分工方式选择
- [ ] **方案A：按端划分**（推荐）
  - 成员A：移动端（查询页、列表页、详情页）
  - 成员B：PC管理端（登录、录入、审核）
  - 成员C：后端 + 公共模块 + 联调
- [ ] **方案B：全栈协作**（备选）
  - 全员参与所有模块，按功能点分工

### 2. 开发协作方式
- [ ] Git 工作流：Feature Branch 工作流
- [ ] 提交规范：使用 Conventional Commits
- [ ] 代码审查：合并前互相审查

### 3. Taro 发布目标
- [ ] **H5 网页版**（必选，主要交付）
- [ ] **微信小程序**（可选，技术展示）

### 4. 组件库选择
- [ ] **NutUI**（推荐，组件丰富）
- [ ] **Taro UI**（官方组件库）
- [ ] **Taroify**（Vant 风格）

---

## 📊 预期成果

### 功能交付物
- ✅ 移动端 H5 版本（3个核心页面）
- ✅ PC 管理端（3个核心页面）
- ✅ Express 后端 API
- ✅ 自定义日历组件
- ✅ 虚拟滚动列表
- ✅ LBS 定位搜索
- ✅ 完整的 README 文档

### 可选交付物
- 📦 微信小程序版本（展示技术能力）

### 评分目标
| 评分项 | 目标分数 | 实现方式 |
|-------|---------|---------|
| 功能完成度（60分） | 55-60 | 6个页面全部实现，无逻辑错误 |
| 技术复杂度（10分） | 8-10 | 虚拟滚动+日历组件+定位+数据结构 |
| 用户体验（10分） | 8-10 | 流畅交互+美观UI+兼容性 |
| 代码质量（10分） | 8-10 | 清晰结构+规范+复用+README |
| 项目创新性（10分） | 8-10 | Taro跨端+3个创新功能 |

**预期总分：87-100 分**

---

## 🎓 学习资源

### Taro 官方文档
- 官网：https://taro-docs.jd.com/
- React 指南：https://taro-docs.jd.com/tutorial
- 组件库：https://taro-docs.jd.com/components

### NutUI 组件库
- 官网：https://nutui.jd.com/
- Taro 版本：https://nutui.jd.com/taro/

### Ant Design
- 官网：https://ant.design/

### Express 教程
- 官网：https://expressjs.com/
- 菜鸟教程：https://www.runoob.com/expressjs

---

## 📝 下一步行动

1. **团队成员讨论确认**：分工方式、组件库选择
2. **创建 Git 仓库**并初始化项目结构
3. **搭建开发环境**
   - 初始化 Taro 移动端项目
   - 初始化 React + Vite PC端项目
   - 初始化 Express 后端项目
   - 配置 Monorepo 工作区
4. **设计数据结构**
   - 酒店信息数据模型
   - 用户/角色数据模型
   - API 接口设计
5. **创建 README**文档

---

> 方案版本：v1.1
> 创建日期：2025-02-13
> 更新日期：2025-02-13
> 状态：待团队确认后开始实施
